{"pageProps":{"doc":{"title":"Receiving and Responding","description":"Receiving and Responding to Interactions","image":"/images/logo.png","body":{"raw":"\nAll Interactions like `Slash Commands` and `Context Menu` can be received by listening to the `CommandInteraction`.\n\n<Callout variant=\"danger\">\n  You should not listen to `InteractionCreate` event, It is used internally and\n  will only emit during Component Interactions.\n</Callout>\n\nReply to every `Slash Command`,`Context Menu` or `Component` interactions must be provided in 3 seconds, if your logic is taking more than that, you must defer the reply first, it will allow you to reply to the interaction within next 15 minutes.\n\nExample of Responding to an Interaction:\n\n```ts\n// snip\n\nclient.on(\"CommandInteraction\", async (interaction) => {\n  if (interaction.isCommand) {\n    await interaction.deferReply({ ephemeral: true });\n    setTimeout(async () => {\n      await interaction.editReply({\n        content: \"This is reply after 3 seconds.\",\n      });\n    }, 3000);\n  }\n});\n```\n\n<H3>Understanding the Code</H3>\n\nWe're listening to `CommandInteraction` event\n\n```ts\nif(interaction.isCommand)\n```\n\nThis line checks if the Interaction received is a Slash Command.\nThe available options are:\n\n- `isCommand`\n- `isAutoComplete`\n- `isComponentInteraction`\n- `isMessageContextMenu`\n- `isModalSubmit`\n- `isUserContextMenu`\n\n```ts\nawait interaction.deferReply({ ephemeral: true });\n```\n\nWe're defering the reply to the interaction, it takes in an optional paramater(an object with a key `ephemeral` with value set to a boolean).\n\nIf ephemeral is `true`, the message showing the loading state will be visible to the user who used the command. If ephemeral is `false`, the message with loading state will be shown to all users.\nYou can't change the state of the message(change the ephemeral value) anywhere in the code,\n\n```ts\nsetTimeout(async () => {\n  await interaction.editReply({\n    content: \"This is reply after 3 seconds.\",\n  });\n}, 3000);\n```\n\nWe're replying to the above interaction after 3 seconds.\n\n\n<H2>Accessing the Value of Options from the Interaction Received</H2>\n\nYou can access the value provided by the user from the interaction using methods listed below.\n\n- `getStringFromOption`\n- `getIntegerFromOption`\n- `getBooleanFromOption`\n- `getUserFromOption`\n- `getChannelFromOption`\n- `getRoleFromOption`\n- `getMentionableFromOption`\n- `getNumberFromOption`\n- `getAttachmentFromOption`\n\nEach of these methods take in name of the option.\n\n","code":"var Component=(()=>{var p=Object.create;var a=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var N=(i,l)=>()=>(l||i((l={exports:{}}).exports,l),l.exports),y=(i,l)=>{for(var t in l)a(i,t,{get:l[t],enumerable:!0})},h=(i,l,t,n)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let s of u(l))!f.call(i,s)&&s!==t&&a(i,s,{get:()=>l[s],enumerable:!(n=g(l,s))||n.enumerable});return i};var w=(i,l,t)=>(t=i!=null?p(j(i)):{},h(l||!i||!i.__esModule?a(t,\"default\",{value:i,enumerable:!0}):t,i)),C=i=>h(a({},\"__esModule\",{value:!0}),i);var m=N((_,d)=>{d.exports=_jsx_runtime});var k={};y(k,{default:()=>x,frontmatter:()=>b});var e=w(m()),b={title:\"Receiving and Responding\",description:\"Receiving and Responding to Interactions\"};function v(i={}){let{wrapper:l}=i.components||{};return l?(0,e.jsx)(l,Object.assign({},i,{children:(0,e.jsx)(t,{})})):t();function t(){let n=Object.assign({p:\"p\",code:\"code\",pre:\"pre\",span:\"span\",ul:\"ul\",li:\"li\"},i.components),{Callout:s,H3:r,H2:o}=n;return s||c(\"Callout\",!0),o||c(\"H2\",!0),r||c(\"H3\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.p,{children:[\"All Interactions like \",(0,e.jsx)(n.code,{children:\"Slash Commands\"}),\" and \",(0,e.jsx)(n.code,{children:\"Context Menu\"}),\" can be received by listening to the \",(0,e.jsx)(n.code,{children:\"CommandInteraction\"}),\".\"]}),`\n`,(0,e.jsx)(s,{variant:\"danger\",children:(0,e.jsxs)(n.p,{children:[\"You should not listen to \",(0,e.jsx)(n.code,{children:\"InteractionCreate\"}),` event, It is used internally and\nwill only emit during Component Interactions.`]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Reply to every \",(0,e.jsx)(n.code,{children:\"Slash Command\"}),\",\",(0,e.jsx)(n.code,{children:\"Context Menu\"}),\" or \",(0,e.jsx)(n.code,{children:\"Component\"}),\" interactions must be provided in 3 seconds, if your logic is taking more than that, you must defer the reply first, it will allow you to reply to the interaction within next 15 minutes.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Example of Responding to an Interaction:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-ts\",children:(0,e.jsxs)(n.code,{className:\"hljs language-ts code-highlight\",children:[(0,e.jsx)(n.span,{className:\"hljs-comment\",children:\"// snip\"}),`\n\nclient.`,(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"on\"}),\"(\",(0,e.jsx)(n.span,{className:\"hljs-string\",children:'\"CommandInteraction\"'}),\", \",(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"async\"}),` (interaction) => {\n  `,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"if\"}),\" (interaction.\",(0,e.jsx)(n.span,{className:\"hljs-property\",children:\"isCommand\"}),`) {\n    `,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"await\"}),\" interaction.\",(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"deferReply\"}),\"({ \",(0,e.jsx)(n.span,{className:\"hljs-attr\",children:\"ephemeral\"}),\": \",(0,e.jsx)(n.span,{className:\"hljs-literal\",children:\"true\"}),` });\n    `,(0,e.jsx)(n.span,{className:\"hljs-built_in\",children:\"setTimeout\"}),\"(\",(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"async\"}),` () => {\n      `,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"await\"}),\" interaction.\",(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"editReply\"}),`({\n        `,(0,e.jsx)(n.span,{className:\"hljs-attr\",children:\"content\"}),\": \",(0,e.jsx)(n.span,{className:\"hljs-string\",children:'\"This is reply after 3 seconds.\"'}),`,\n      });\n    }, `,(0,e.jsx)(n.span,{className:\"hljs-number\",children:\"3000\"}),`);\n  }\n});\n`]})}),`\n`,(0,e.jsx)(r,{children:\"Understanding the Code\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"We're listening to \",(0,e.jsx)(n.code,{children:\"CommandInteraction\"}),\" event\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-ts\",children:(0,e.jsxs)(n.code,{className:\"hljs language-ts code-highlight\",children:[(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"if\"}),\"(interaction.\",(0,e.jsx)(n.span,{className:\"hljs-property\",children:\"isCommand\"}),`)\n`]})}),`\n`,(0,e.jsx)(n.p,{children:`This line checks if the Interaction received is a Slash Command.\nThe available options are:`}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"isCommand\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"isAutoComplete\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"isComponentInteraction\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"isMessageContextMenu\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"isModalSubmit\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"isUserContextMenu\"})}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-ts\",children:(0,e.jsxs)(n.code,{className:\"hljs language-ts code-highlight\",children:[(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"await\"}),\" interaction.\",(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"deferReply\"}),\"({ \",(0,e.jsx)(n.span,{className:\"hljs-attr\",children:\"ephemeral\"}),\": \",(0,e.jsx)(n.span,{className:\"hljs-literal\",children:\"true\"}),` });\n`]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"We're defering the reply to the interaction, it takes in an optional paramater(an object with a key \",(0,e.jsx)(n.code,{children:\"ephemeral\"}),\" with value set to a boolean).\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"If ephemeral is \",(0,e.jsx)(n.code,{children:\"true\"}),\", the message showing the loading state will be visible to the user who used the command. If ephemeral is \",(0,e.jsx)(n.code,{children:\"false\"}),`, the message with loading state will be shown to all users.\nYou can't change the state of the message(change the ephemeral value) anywhere in the code,`]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-ts\",children:(0,e.jsxs)(n.code,{className:\"hljs language-ts code-highlight\",children:[(0,e.jsx)(n.span,{className:\"hljs-built_in\",children:\"setTimeout\"}),\"(\",(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"async\"}),` () => {\n  `,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"await\"}),\" interaction.\",(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"editReply\"}),`({\n    `,(0,e.jsx)(n.span,{className:\"hljs-attr\",children:\"content\"}),\": \",(0,e.jsx)(n.span,{className:\"hljs-string\",children:'\"This is reply after 3 seconds.\"'}),`,\n  });\n}, `,(0,e.jsx)(n.span,{className:\"hljs-number\",children:\"3000\"}),`);\n`]})}),`\n`,(0,e.jsx)(n.p,{children:\"We're replying to the above interaction after 3 seconds.\"}),`\n`,(0,e.jsx)(o,{children:\"Accessing the Value of Options from the Interaction Received\"}),`\n`,(0,e.jsx)(n.p,{children:\"You can access the value provided by the user from the interaction using methods listed below.\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"getStringFromOption\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"getIntegerFromOption\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"getBooleanFromOption\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"getUserFromOption\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"getChannelFromOption\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"getRoleFromOption\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"getMentionableFromOption\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"getNumberFromOption\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.code,{children:\"getAttachmentFromOption\"})}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"Each of these methods take in name of the option.\"})]})}}var x=v;function c(i,l){throw new Error(\"Expected \"+(l?\"component\":\"object\")+\" `\"+i+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return C(k);})();\n;return Component;"},"_id":"receiving-and-responding.mdx","_raw":{"sourceFilePath":"receiving-and-responding.mdx","sourceFileName":"receiving-and-responding.mdx","sourceFileDir":".","contentType":"mdx","flattenedPath":"receiving-and-responding"},"type":"Docs","url":"/docs/receiving-and-responding","createdAt":1655539603060}},"__N_SSG":true}